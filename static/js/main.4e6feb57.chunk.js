(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{126:function(t,e,n){"use strict";n.r(e);n(94);var r=n(29),c=n(19),a=n(6),u=n(64),o=n(79),i={key:"auth",storage:n.n(o).a,whitelist:["token"]},s=Object(a.a)({reducer:{auth:Object(r.g)(i,c.c),contacts:u.a},middleware:function(t){return t({serializableCheck:{ignoredActions:[r.a,r.f,r.b,r.c,r.d,r.e]}})},devTools:!1}),l=Object(r.h)(s),f=n(12),d=n(0),j=n.n(d),b=n(18),p=n(152),O=n(153),h=n(150),g=n(156),v=n(151),x=n(84),m=n.n(x),y=n(146),k=n(3),C=Object(y.a)((function(t){return{avatar:{display:"inline-flex",marginRight:t.spacing(1)},container:{display:"flex",alignItems:"center"}}}));function w(){var t=Object(b.c)(c.d.getUsername),e=Object(b.b)(),n=C();return Object(k.jsxs)("div",{className:n.container,children:[Object(k.jsx)(g.a,{className:n.avatar,alt:t}),Object(k.jsx)(h.a,{children:t}),Object(k.jsx)(v.a,{color:"inherit",onClick:function(){return e(c.b.logOut())},children:Object(k.jsx)(m.a,{})})]})}var I=Object(y.a)((function(t){return{title:{flexGrow:1}}}));function L(){var t=Object(b.c)(c.d.getIsLoggedIn),e=I();return Object(k.jsx)(p.a,{position:"relative",children:Object(k.jsxs)(O.a,{children:[Object(k.jsx)(h.a,{className:e.title,variant:"h4",component:"h1",children:"Phonebook"}),t&&Object(k.jsx)(w,{})]})})}var U=n(154),T=n(155),V=n(34),W=n(49),E=["children","redirectTo"];function z(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,a=Object(W.a)(t,E),u=Object(b.c)(c.d.getIsLoggedIn);return Object(k.jsx)(f.b,Object(V.a)(Object(V.a)({},a),{},{children:u?e:Object(k.jsx)(f.a,{to:r})}))}var A=["children","redirectTo","restricted"];function F(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,a=t.restricted,u=void 0!==a&&a,o=Object(W.a)(t,A),i=Object(b.c)(c.d.getIsLoggedIn);return Object(k.jsx)(f.b,Object(V.a)(Object(V.a)({},o),{},{children:u&&i?Object(k.jsx)(f.a,{to:r}):e}))}var N=Object(d.lazy)((function(){return Promise.all([n.e(0),n.e(7),n.e(1)]).then(n.bind(null,360))})),P=Object(d.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(2)]).then(n.bind(null,358))}));function S(){var t=Object(b.b)(),e=Object(b.c)(c.d.getIsLogging);return Object(d.useEffect)((function(){t(c.b.checkCurrentUser())}),[t]),Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(U.a,{}),e?Object(k.jsx)(T.a,{}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(L,{}),Object(k.jsx)(d.Suspense,{fallback:Object(k.jsx)(T.a,{}),children:Object(k.jsxs)(f.d,{children:[Object(k.jsx)(z,{path:"/",exact:!0,redirectTo:"/login",children:Object(k.jsx)(f.a,{to:"/contacts"})}),Object(k.jsx)(F,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(k.jsx)(N,{})}),Object(k.jsx)(F,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(k.jsx)(N,{})}),Object(k.jsx)(z,{path:"/contacts",children:Object(k.jsx)(P,{})}),Object(k.jsx)(f.b,{children:Object(k.jsx)(f.a,{to:"/"})})]})})]})]})}var B=n(37),J=n(86),R=n(30);n.n(R).a.render(Object(k.jsx)(j.a.StrictMode,{children:Object(k.jsx)(b.a,{store:s,children:Object(k.jsx)(J.a,{loading:null,persistor:l,children:Object(k.jsx)(B.a,{children:Object(k.jsx)(S,{})})})})}),document.getElementById("root"))},19:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return g})),n.d(e,"c",(function(){return T})),n.d(e,"a",(function(){return r}));var r={};n.r(r),n.d(r,"resetError",(function(){return x}));var c,a,u,o,i,s,l=n(5),f=n.n(l),d=n(14),j=n(25),b=n(6),p=Object(b.c)("auth/register",function(){var t=Object(d.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.g(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()),O=Object(b.c)("auth/login",function(){var t=Object(d.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.f(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:p,logOut:Object(b.c)("auth/logout",function(){var t=Object(d.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.e();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:O,checkCurrentUser:Object(b.c)("auth/refresh",function(){var t=Object(d.a)(f.a.mark((function t(e,n){var r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return t.prev=4,t.next=7,j.a(c);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(4),t.abrupt("return",n.rejectWithValue(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,n){return t.apply(this,arguments)}}())},g={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsLogging:function(t){return t.auth.isLogging},getError:function(t){return t.auth.error},getIsLoading:function(t){return t.auth.isLoading},getToken:function(t){return t.auth.token}},v=n(2),x=Object(b.b)("auth/resetError"),m=n(15),y=function(t){return{name:t.user.name,email:t.user.email}},k=Object(b.d)({name:null,email:null},(c={},Object(v.a)(c,h.register.fulfilled,(function(t,e){var n=e.payload;return y(n)})),Object(v.a)(c,h.logIn.fulfilled,(function(t,e){var n=e.payload;return y(n)})),Object(v.a)(c,h.checkCurrentUser.fulfilled,(function(t,e){var n=e.payload;return{name:n.name,email:n.email}})),Object(v.a)(c,h.logOut.fulfilled,(function(t,e){e.payload;return{name:null,email:null}})),c)),C=Object(b.d)(null,(a={},Object(v.a)(a,h.register.fulfilled,(function(t,e){return e.payload.token})),Object(v.a)(a,h.logIn.fulfilled,(function(t,e){return e.payload.token})),Object(v.a)(a,h.logOut.fulfilled,(function(){return null})),a)),w=Object(b.d)(!1,(u={},Object(v.a)(u,h.register.fulfilled,(function(){return!0})),Object(v.a)(u,h.logIn.fulfilled,(function(){return!0})),Object(v.a)(u,h.logOut.fulfilled,(function(){return!1})),Object(v.a)(u,h.checkCurrentUser.fulfilled,(function(){return!0})),u)),I=Object(b.d)(!1,(o={},Object(v.a)(o,h.checkCurrentUser.pending,(function(){return!0})),Object(v.a)(o,h.checkCurrentUser.fulfilled,(function(){return!1})),Object(v.a)(o,h.checkCurrentUser.rejected,(function(){return!1})),o)),L=Object(b.d)(!1,(i={},Object(v.a)(i,h.register.pending,(function(){return!0})),Object(v.a)(i,h.register.fulfilled,(function(){return!1})),Object(v.a)(i,h.register.rejected,(function(){return!1})),Object(v.a)(i,h.logIn.pending,(function(){return!0})),Object(v.a)(i,h.logIn.fulfilled,(function(){return!1})),Object(v.a)(i,h.logIn.rejected,(function(){return!1})),Object(v.a)(i,h.logOut.pending,(function(){return!0})),Object(v.a)(i,h.logOut.fulfilled,(function(){return!1})),Object(v.a)(i,h.logOut.rejected,(function(){return!1})),i)),U=Object(b.d)(null,(s={},Object(v.a)(s,h.register.rejected,(function(t,e){return e.payload})),Object(v.a)(s,h.logIn.rejected,(function(t,e){return e.payload})),Object(v.a)(s,h.logOut.rejected,(function(t,e){return e.payload})),Object(v.a)(s,h.checkCurrentUser.rejected,(function(t,e){return e.payload})),Object(v.a)(s,h.register.pending,(function(){return null})),Object(v.a)(s,h.logIn.pending,(function(){return null})),Object(v.a)(s,h.logOut.pending,(function(){return null})),Object(v.a)(s,h.checkCurrentUser.pending,(function(){return null})),Object(v.a)(s,x,(function(){return null})),s)),T=Object(m.b)({user:k,token:C,isLoggedIn:w,isLogging:I,isLoading:L,error:U})},25:function(t,e,n){"use strict";n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return b})),n.d(e,"a",(function(){return O})),n.d(e,"d",(function(){return g})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return y})),n.d(e,"h",(function(){return C}));var r=n(5),c=n.n(r),a=n(14),u=n(23),o=n.n(u);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},s=function(){o.a.defaults.headers.common.Authorization=""};function l(t){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/users/signup",e);case 2:return n=t.sent,r=n.data,i(r.token),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/users/login",e);case 2:return n=t.sent,r=n.data,i(r.token),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/users/logout");case 2:s();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(e),t.next=3,o.a.get("/users/current");case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/contacts");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/contacts",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return k.apply(this,arguments)}function k(){return(k=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.delete("/contacts/".concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){return w.apply(this,arguments)}function w(){return(w=Object(a.a)(c.a.mark((function t(e){var n,r,a,u,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,r=e.name,a=e.number,t.next=3,o.a.patch("/contacts/".concat(n),{name:r,number:a});case 3:return u=t.sent,i=u.data,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},52:function(t,e,n){"use strict";n.r(e),n.d(e,"changeFilter",(function(){return c})),n.d(e,"resetError",(function(){return a}));var r=n(6),c=Object(r.b)("contacts/changeFilter"),a=Object(r.b)("contacts/resetError")},64:function(t,e,n){"use strict";var r,c,a,u=n(2),o=n(51),i=n(52),s=n(8),l=n(15),f=n(6),d=Object(f.d)([],(r={},Object(u.a)(r,s.fetchContacts.fulfilled,(function(t,e){return e.payload})),Object(u.a)(r,s.addContact.fulfilled,(function(t,e){return[e.payload].concat(Object(o.a)(t))})),Object(u.a)(r,s.deleteContact.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(u.a)(r,s.updateContact.fulfilled,(function(t,e){var n=e.payload;return Object(o.a)(t).map((function(t){return t.id===n.id?n:t}))})),r)),j=Object(f.d)("",Object(u.a)({},i.changeFilter,(function(t,e){return e.payload}))),b=Object(f.d)(!1,(c={},Object(u.a)(c,s.fetchContacts.pending,(function(){return!0})),Object(u.a)(c,s.fetchContacts.fulfilled,(function(){return!1})),Object(u.a)(c,s.fetchContacts.rejected,(function(){return!1})),Object(u.a)(c,s.addContact.pending,(function(){return!0})),Object(u.a)(c,s.addContact.fulfilled,(function(){return!1})),Object(u.a)(c,s.addContact.rejected,(function(){return!1})),Object(u.a)(c,s.deleteContact.pending,(function(){return!0})),Object(u.a)(c,s.deleteContact.fulfilled,(function(){return!1})),Object(u.a)(c,s.deleteContact.rejected,(function(){return!1})),Object(u.a)(c,s.updateContact.pending,(function(){return!0})),Object(u.a)(c,s.updateContact.fulfilled,(function(){return!1})),Object(u.a)(c,s.updateContact.rejected,(function(){return!1})),c)),p=Object(f.d)(null,(a={},Object(u.a)(a,s.fetchContacts.pending,(function(){return null})),Object(u.a)(a,s.fetchContacts.rejected,(function(t,e){return e.payload})),Object(u.a)(a,s.addContact.pending,(function(){return null})),Object(u.a)(a,s.addContact.rejected,(function(t,e){return e.payload})),Object(u.a)(a,s.deleteContact.pending,(function(){return null})),Object(u.a)(a,s.deleteContact.rejected,(function(t,e){return e.payload})),Object(u.a)(a,s.updateContact.pending,(function(){return null})),Object(u.a)(a,s.updateContact.rejected,(function(t,e){return e.payload})),Object(u.a)(a,i.resetError,(function(){return null})),a));e.a=Object(l.b)({items:d,filter:j,isLoading:b,error:p})},8:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContacts",(function(){return i})),n.d(e,"addContact",(function(){return s})),n.d(e,"deleteContact",(function(){return l})),n.d(e,"updateContact",(function(){return f}));var r=n(5),c=n.n(r),a=n(14),u=n(25),o=n(6),i=Object(o.c)("contacts/fetchContacts",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.d();case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),s=Object(o.c)("contacts/addContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.b(e);case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),l=Object(o.c)("contacts/deleteContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.c(e);case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(o.c)("contacts/updateContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,u.h(e);case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}())},94:function(t,e,n){}},[[126,4,5]]]);
//# sourceMappingURL=main.4e6feb57.chunk.js.map