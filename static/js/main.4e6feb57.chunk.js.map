{"version":3,"sources":["redux/store.js","components/UserMenu/UserMenu.js","components/AppBar/AppBar.js","components/PrivateRoute/PrivateRoute.js","components/PublicRoute/PublicRoute.js","App.js","index.js","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-actions.js","redux/auth/auth-reducer.js","services/phonebook-api.js","redux/contacts/contacts-actions.js","redux/contacts/contacts-reducer.js","redux/contacts/contacts-operations.js"],"names":["authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","contacts","contactsReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","devTools","process","persistor","persistStore","useStyles","makeStyles","theme","avatar","display","marginRight","spacing","container","alignItems","UserMenu","userName","useSelector","authSelectors","getUsername","dispatch","useDispatch","c","className","Avatar","alt","Typography","IconButton","color","onClick","authOperations","logOut","title","flexGrow","AppBar","isLoggedIn","getIsLoggedIn","position","Toolbar","variant","component","PrivateRoute","children","redirectTo","routeProps","to","PublicRoute","restricted","AuthPage","lazy","ContactsPage","App","isLogging","getIsLogging","useEffect","checkCurrentUser","CssBaseline","LinearProgress","fallback","path","exact","ReactDOM","render","StrictMode","loading","document","getElementById","register","createAsyncThunk","credentials","thunkAPI","a","api","rejectWithValue","message","logIn","operations","_","state","getState","persistedToken","token","user","name","getError","error","getIsLoading","isLoading","getToken","resetError","createAction","setUser","payload","email","createReducer","fulfilled","pending","rejected","action","actions","combineReducers","defaults","baseURL","headers","common","Authorization","registerUser","post","data","loginUser","logOutUser","CheckCurrentUser","currentToken","get","fetchContacts","addContact","contact","deleteContact","contactId","delete","updateContact","id","number","patch","changeFilter","items","filter","map","item","result"],"mappings":"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","file":"static/js/main.4e6feb57.chunk.js","sourcesContent":["import {\n  FLUSH,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n  REHYDRATE,\n  persistReducer,\n  persistStore,\n} from 'redux-persist';\n\nimport { authReducer } from './auth';\nimport { configureStore } from '@reduxjs/toolkit';\nimport contactsReducer from './contacts/contacts-reducer';\nimport storage from 'redux-persist/lib/storage';\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(authPersistConfig, authReducer),\n    contacts: contactsReducer,\n  },\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n      },\n    }),\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);\n","import { Avatar, IconButton, Typography } from '@material-ui/core';\nimport { authOperations, authSelectors } from '../../redux/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    display: 'inline-flex',\n    marginRight: theme.spacing(1),\n  },\n  container: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n}));\n\nexport default function UserMenu() {\n  const userName = useSelector(authSelectors.getUsername);\n  const dispatch = useDispatch();\n  const c = useStyles();\n\n  return (\n    <div className={c.container}>\n      <Avatar className={c.avatar} alt={userName} />\n      <Typography>{userName}</Typography>\n      <IconButton\n        color=\"inherit\"\n        onClick={() => dispatch(authOperations.logOut())}\n      >\n        <ExitToAppIcon />\n      </IconButton>\n    </div>\n  );\n}\n","import { AppBar as MUIAppBar, Toolbar, Typography } from '@material-ui/core';\n\nimport React from 'react';\nimport UserMenu from 'components/UserMenu';\nimport { authSelectors } from '../../redux/auth';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSelector } from 'react-redux';\n\nconst useStyles = makeStyles(theme => ({\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function AppBar() {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  const c = useStyles();\n\n  return (\n    <MUIAppBar position=\"relative\">\n      <Toolbar>\n        <Typography className={c.title} variant=\"h4\" component=\"h1\">\n          Phonebook\n        </Typography>\n        {isLoggedIn && <UserMenu />}\n      </Toolbar>\n    </MUIAppBar>\n  );\n}\n","import { Redirect, Route } from 'react-router-dom';\n\nimport React from 'react';\nimport { authSelectors } from '../../redux/auth';\nimport { useSelector } from 'react-redux';\n\nexport default function PrivateRoute({\n  children,\n  redirectTo = '/',\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n\n  return (\n    <Route {...routeProps}>\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\n    </Route>\n  );\n}\n","import { Redirect, Route } from 'react-router-dom';\n\nimport React from 'react';\nimport { authSelectors } from '../../redux/auth';\nimport { useSelector } from 'react-redux';\n\nexport default function PublicRoute({\n  children,\n  redirectTo = '/',\n  restricted = false,\n  ...routeProps\n}) {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n\n  return (\n    <Route {...routeProps}>\n      {restricted && isLoggedIn ? <Redirect to={redirectTo} /> : children}\n    </Route>\n  );\n}\n","import { Redirect, Switch, Route } from 'react-router-dom';\nimport { Suspense, lazy, useEffect } from 'react';\nimport { authOperations, authSelectors } from './redux/auth';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport AppBar from 'components/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { LinearProgress } from '@material-ui/core';\nimport PrivateRoute from 'components/PrivateRoute';\nimport PublicRoute from 'components/PublicRoute';\n\nconst AuthPage = lazy(() =>\n  import('pages/AuthPage' /* webpackChunkName: \"auth-page\" */),\n);\n\nconst ContactsPage = lazy(() =>\n  import('pages/ContactsPage' /* webpackChunkName: \"contacts-page\" */),\n);\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isLogging = useSelector(authSelectors.getIsLogging);\n\n  useEffect(() => {\n    dispatch(authOperations.checkCurrentUser());\n  }, [dispatch]);\n\n  return (\n    <div className=\"App\">\n      <CssBaseline />\n      {isLogging ? (\n        <LinearProgress />\n      ) : (\n        <>\n          <AppBar />\n          <Suspense fallback={<LinearProgress />}>\n            <Switch>\n              <PrivateRoute path=\"/\" exact redirectTo=\"/login\">\n                <Redirect to=\"/contacts\" />\n              </PrivateRoute>\n              <PublicRoute path=\"/login\" restricted redirectTo=\"/contacts\">\n                <AuthPage />\n              </PublicRoute>\n              <PublicRoute path=\"/register\" restricted redirectTo=\"/contacts\">\n                <AuthPage />\n              </PublicRoute>\n              <PrivateRoute path=\"/contacts\">\n                <ContactsPage />\n              </PrivateRoute>\n              <Route>\n                <Redirect to=\"/\" />\n              </Route>\n            </Switch>\n          </Suspense>\n        </>\n      )}\n    </div>\n  );\n}\n","import './index.css';\n\nimport { persistor, store } from './redux/store';\n\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { Provider } from 'react-redux';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","import * as api from '../../services/phonebook-api';\n\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\nconst register = createAsyncThunk(\n  'auth/register',\n  async (credentials, thunkAPI) => {\n    try {\n      return await api.registerUser(credentials);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  },\n);\n\nconst logIn = createAsyncThunk('auth/login', async (credentials, thunkAPI) => {\n  try {\n    return await api.loginUser(credentials);\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});\n\nconst logOut = createAsyncThunk('auth/logout', async (_, thunkAPI) => {\n  try {\n    await api.logOutUser();\n  } catch (error) {\n    return thunkAPI.rejectWithValue(error.message);\n  }\n});\n\nconst checkCurrentUser = createAsyncThunk(\n  'auth/refresh',\n  async (_, thunkAPI) => {\n    const state = thunkAPI.getState();\n    const persistedToken = state.auth.token;\n\n    if (persistedToken === null) {\n      return thunkAPI.rejectWithValue();\n    }\n\n    try {\n      return await api.CheckCurrentUser(persistedToken);\n    } catch (error) {\n      return thunkAPI.rejectWithValue(error.message);\n    }\n  },\n);\n\nconst operations = {\n  register,\n  logOut,\n  logIn,\n  checkCurrentUser,\n};\nexport default operations;\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\n\nconst getUsername = state => state.auth.user.name;\n\nconst getIsLogging = state => state.auth.isLogging;\n\nconst getIsLoading = state => state.auth.isLoading;\n\nconst getError = state => state.auth.error;\n\nconst getToken = state => state.auth.token;\n\nconst authSelectors = {\n  getIsLoggedIn,\n  getUsername,\n  getIsLogging,\n  getError,\n  getIsLoading,\n  getToken,\n};\nexport default authSelectors;\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const resetError = createAction('auth/resetError');\n","import * as actions from './auth-actions';\n\nimport authOperations from './auth-operations';\nimport { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\n\nconst setUser = payload => ({\n  name: payload.user.name,\n  email: payload.user.email,\n});\n\nconst user = createReducer(\n  { name: null, email: null },\n  {\n    [authOperations.register.fulfilled]: (state, { payload }) =>\n      setUser(payload),\n    [authOperations.logIn.fulfilled]: (state, { payload }) => setUser(payload),\n    [authOperations.checkCurrentUser.fulfilled]: (state, { payload }) => ({\n      name: payload.name,\n      email: payload.email,\n    }),\n    [authOperations.logOut.fulfilled]: (state, { payload }) => ({\n      name: null,\n      email: null,\n    }),\n  },\n);\n\nconst token = createReducer(null, {\n  [authOperations.register.fulfilled]: (state, { payload }) => payload.token,\n  [authOperations.logIn.fulfilled]: (state, { payload }) => payload.token,\n  [authOperations.logOut.fulfilled]: () => null,\n});\n\nconst isLoggedIn = createReducer(false, {\n  [authOperations.register.fulfilled]: () => true,\n  [authOperations.logIn.fulfilled]: () => true,\n  [authOperations.logOut.fulfilled]: () => false,\n  [authOperations.checkCurrentUser.fulfilled]: () => true,\n});\n\nconst isLogging = createReducer(false, {\n  [authOperations.checkCurrentUser.pending]: () => true,\n  [authOperations.checkCurrentUser.fulfilled]: () => false,\n  [authOperations.checkCurrentUser.rejected]: () => false,\n});\n\nconst isLoading = createReducer(false, {\n  [authOperations.register.pending]: () => true,\n  [authOperations.register.fulfilled]: () => false,\n  [authOperations.register.rejected]: () => false,\n\n  [authOperations.logIn.pending]: () => true,\n  [authOperations.logIn.fulfilled]: () => false,\n  [authOperations.logIn.rejected]: () => false,\n\n  [authOperations.logOut.pending]: () => true,\n  [authOperations.logOut.fulfilled]: () => false,\n  [authOperations.logOut.rejected]: () => false,\n});\n\nconst error = createReducer(null, {\n  [authOperations.register.rejected]: (_, action) => action.payload,\n  [authOperations.logIn.rejected]: (_, action) => action.payload,\n  [authOperations.logOut.rejected]: (_, action) => action.payload,\n  [authOperations.checkCurrentUser.rejected]: (_, action) => action.payload,\n\n  [authOperations.register.pending]: () => null,\n  [authOperations.logIn.pending]: () => null,\n  [authOperations.logOut.pending]: () => null,\n  [authOperations.checkCurrentUser.pending]: () => null,\n\n  [actions.resetError]: () => null,\n});\n\nexport default combineReducers({\n  user,\n  token,\n  isLoggedIn,\n  isLogging,\n  isLoading,\n  error,\n});\n","import api from 'axios';\n\napi.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst token = {\n  set(token) {\n    api.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  remove() {\n    api.defaults.headers.common.Authorization = '';\n  },\n};\n\nexport async function registerUser(credentials) {\n  const { data } = await api.post('/users/signup', credentials);\n  token.set(data.token);\n  return data;\n}\n\nexport async function loginUser(credentials) {\n  const { data } = await api.post('/users/login', credentials);\n  token.set(data.token);\n  return data;\n}\n\nexport async function logOutUser() {\n  await api.post('/users/logout');\n  token.remove();\n}\n\nexport async function CheckCurrentUser(currentToken) {\n  token.set(currentToken);\n  const { data } = await api.get('/users/current');\n  return data;\n}\n\nexport async function fetchContacts() {\n  const { data } = await api.get(`/contacts`);\n  return data;\n}\n\nexport async function addContact(contact) {\n  const { data } = await api.post('/contacts', contact);\n  return data;\n}\n\nexport async function deleteContact(contactId) {\n  const { data } = await api.delete(`/contacts/${contactId}`);\n  return data;\n}\n\nexport async function updateContact({ id, name, number }) {\n  const { data } = await api.patch(`/contacts/${id}`, { name, number });\n  return data;\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const changeFilter = createAction('contacts/changeFilter');\n\nexport const resetError = createAction('contacts/resetError');\n","import * as actions from './contacts-actions';\n\nimport {\n  addContact,\n  deleteContact,\n  fetchContacts,\n  updateContact,\n} from './contacts-operations';\n\nimport { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\n\nconst items = createReducer([], {\n  [fetchContacts.fulfilled]: (_, action) => action.payload,\n  [addContact.fulfilled]: (state, { payload }) => [payload, ...state],\n  [deleteContact.fulfilled]: (state, { payload }) =>\n    state.filter(({ id }) => id !== payload),\n\n  [updateContact.fulfilled]: (state, { payload }) => {\n    return [...state].map(item => {\n      if (item.id === payload.id) {\n        return payload;\n      }\n      return item;\n    });\n  },\n});\n\nconst filter = createReducer('', {\n  [actions.changeFilter]: (state, { payload }) => payload,\n});\n\nconst isLoading = createReducer(false, {\n  [fetchContacts.pending]: () => true,\n  [fetchContacts.fulfilled]: () => false,\n  [fetchContacts.rejected]: () => false,\n\n  [addContact.pending]: () => true,\n  [addContact.fulfilled]: () => false,\n  [addContact.rejected]: () => false,\n\n  [deleteContact.pending]: () => true,\n  [deleteContact.fulfilled]: () => false,\n  [deleteContact.rejected]: () => false,\n\n  [updateContact.pending]: () => true,\n  [updateContact.fulfilled]: () => false,\n  [updateContact.rejected]: () => false,\n});\n\nconst error = createReducer(null, {\n  [fetchContacts.pending]: () => null,\n  [fetchContacts.rejected]: (_, action) => action.payload,\n\n  [addContact.pending]: () => null,\n  [addContact.rejected]: (_, action) => action.payload,\n\n  [deleteContact.pending]: () => null,\n  [deleteContact.rejected]: (_, action) => action.payload,\n\n  [updateContact.pending]: () => null,\n  [updateContact.rejected]: (_, action) => action.payload,\n\n  [actions.resetError]: () => null,\n});\n\nexport default combineReducers({ items, filter, isLoading, error });\n","import * as api from 'services/phonebook-api';\n\nimport { createAsyncThunk } from '@reduxjs/toolkit';\n\nexport const fetchContacts = createAsyncThunk(\n  'contacts/fetchContacts',\n  async (_, { rejectWithValue }) => {\n    try {\n      const contacts = await api.fetchContacts();\n      return contacts;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  },\n);\n\nexport const addContact = createAsyncThunk(\n  'contacts/addContact',\n  async (contact, { rejectWithValue }) => {\n    try {\n      const result = await api.addContact(contact);\n      return result;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  },\n);\n\nexport const deleteContact = createAsyncThunk(\n  'contacts/deleteContact',\n  async (contactId, { rejectWithValue }) => {\n    try {\n      await api.deleteContact(contactId);\n      return contactId;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  },\n);\n\nexport const updateContact = createAsyncThunk(\n  'contacts/updateContact',\n  async (contact, { rejectWithValue }) => {\n    try {\n      const result = await api.updateContact(contact);\n      return result;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  },\n);\n"],"sourceRoot":""}