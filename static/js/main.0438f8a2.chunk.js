(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{103:function(t,e,n){"use strict";n.r(e);n(53);var r=n(21),c=n(11),a=n(5),u=n(34),o=n(46),i={key:"auth",storage:n.n(o).a,whitelist:["token"]},s=Object(a.a)({reducer:{auth:Object(r.g)(i,c.b),contacts:u.a},middleware:function(t){return t({serializableCheck:{ignoredActions:[r.a,r.f,r.b,r.c,r.d,r.e]}})},devTools:!1}),l=Object(r.h)(s),d=(n(75),n(7)),f=n(0),b=n.n(f),j=n(10),p=n(19),O=n(1);function h(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.b,{to:"/register",exact:!0,children:"Register"}),Object(O.jsx)(p.b,{to:"/login",exact:!0,children:"Login"})]})}var g=n(45);function v(){var t=Object(j.c)(c.c.getUsername),e=Object(j.b)();return Object(O.jsxs)("div",{children:["Hello, ",t,"!",Object(O.jsx)(g.a,{type:"button",onClick:function(){return e(c.a.logOut())},children:"Logout"})]})}function x(){var t=Object(j.c)(c.c.getIsLoggedIn);return Object(O.jsxs)("header",{children:[Object(O.jsx)("h1",{children:"Phonebook"}),t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsx)(p.b,{to:"/contacts",children:"Contacts"})]}):Object(O.jsx)(h,{})]})}var m=n(30),k=n(20),C=n(22),y=["children","redirectTo"];function w(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,a=Object(C.a)(t,y),u=Object(j.c)(c.c.getIsLoggedIn);return Object(O.jsx)(d.b,Object(k.a)(Object(k.a)({},a),{},{children:u?e:Object(O.jsx)(d.a,{to:r})}))}var I=["children","redirectTo","restricted"];function L(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,a=t.restricted,u=void 0!==a&&a,o=Object(C.a)(t,I),i=Object(j.c)(c.c.getIsLoggedIn);return Object(O.jsx)(d.b,Object(k.a)(Object(k.a)({},o),{},{children:u&&i?Object(O.jsx)(d.a,{to:r}):e}))}var U=Object(f.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,269))})),T=Object(f.lazy)((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,270))})),F=Object(f.lazy)((function(){return Promise.all([n.e(0),n.e(7),n.e(1)]).then(n.bind(null,268))}));function z(){var t=Object(j.b)(),e=Object(j.c)(c.c.getIsLogging);return Object(f.useEffect)((function(){t(c.a.checkCurrentUser())}),[t]),Object(O.jsx)("div",{className:"App",children:e?Object(O.jsx)(m.a,{}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(x,{}),Object(O.jsx)(d.d,{children:Object(O.jsxs)(f.Suspense,{fallback:Object(O.jsx)(m.a,{}),children:[Object(O.jsx)(w,{path:"/",exact:!0,redirectTo:"/login",children:Object(O.jsx)(d.a,{to:"/contacts"})}),Object(O.jsx)(L,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(O.jsx)(T,{})}),Object(O.jsx)(L,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(O.jsx)(U,{})}),Object(O.jsx)(w,{path:"/contacts",children:Object(O.jsx)(F,{})})]})})]})})}var _=n(51),A=n(27);n.n(A).a.render(Object(O.jsx)(b.a.StrictMode,{children:Object(O.jsx)(j.a,{store:s,children:Object(O.jsx)(_.a,{loading:null,persistor:l,children:Object(O.jsx)(p.a,{children:Object(O.jsx)(z,{})})})})}),document.getElementById("root"))},11:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return w}));var r=n(6),c=n.n(r),a=n(15),u=n(18),o=n.n(u),i=n(5);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var s,l,d,f,b=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){o.a.defaults.headers.common.Authorization=""},p=Object(i.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/signup",e);case 3:return n=t.sent,r=n.data,b(r.token),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),O=Object(i.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/login",e);case 3:return n=t.sent,r=n.data,b(r.token),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),h={register:p,logOut:Object(i.c)("auth/logout",Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("/users/logout");case 3:j(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))),logIn:O,checkCurrentUser:Object(i.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return b(a),t.prev=5,t.next=8,o.a.get("/users/current");case 8:return u=t.sent,i=u.data,t.abrupt("return",i);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",n.rejectWithValue(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},g={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsLogging:function(t){return t.auth.isLogging}},v=n(2),x=n(9),m=Object(i.d)({name:null,email:null},(s={},Object(v.a)(s,h.register.fulfilled,(function(t,e){var n=e.payload;return{name:n.user.name,email:n.user.email}})),Object(v.a)(s,h.logIn.fulfilled,(function(t,e){var n=e.payload;return{name:n.user.name,email:n.user.email}})),Object(v.a)(s,h.logOut.fulfilled,(function(t,e){e.payload;return{name:null,email:null}})),Object(v.a)(s,h.checkCurrentUser.fulfilled,(function(t,e){var n=e.payload;return{name:n.name,email:n.email}})),s)),k=Object(i.d)(null,(l={},Object(v.a)(l,h.register.fulfilled,(function(t,e){return e.payload.token})),Object(v.a)(l,h.logIn.fulfilled,(function(t,e){return e.payload.token})),Object(v.a)(l,h.logOut.fulfilled,(function(){return null})),l)),C=Object(i.d)(!1,(d={},Object(v.a)(d,h.register.fulfilled,(function(){return!0})),Object(v.a)(d,h.logIn.fulfilled,(function(){return!0})),Object(v.a)(d,h.logOut.fulfilled,(function(){return!1})),Object(v.a)(d,h.checkCurrentUser.fulfilled,(function(){return!0})),d)),y=Object(i.d)(!1,(f={},Object(v.a)(f,h.checkCurrentUser.pending,(function(){return!0})),Object(v.a)(f,h.checkCurrentUser.fulfilled,(function(){return!1})),Object(v.a)(f,h.checkCurrentUser.rejected,(function(){return!1})),f)),w=Object(x.b)({user:m,token:k,isLoggedIn:C,isLogging:y})},30:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(49),c=n.n(r),a=(n(0),n(50)),u=n.n(a),o=n(1);function i(){return Object(o.jsx)(c.a,{className:u.a.item,type:"Audio",color:"#52ab98",height:50,width:50})}},32:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(20),c=n(22),a=(n(0),n(48)),u=n.n(a),o=n(1),i=["type","onClick","disabled","children"];function s(t){var e=t.type,n=void 0===e?"button":e,a=t.onClick,s=t.disabled,l=void 0!==s&&s,d=t.children,f=Object(c.a)(t,i);return Object(o.jsx)("button",Object(r.a)(Object(r.a)({type:n,className:u.a.button,disabled:l,onClick:a},f),{},{children:d}))}},34:function(t,e,n){"use strict";var r,c,a,u=n(2),o=n(33),i=n(36),s=n(8),l=n(9),d=n(5),f=Object(d.d)([],(r={},Object(u.a)(r,s.fetchContacts.fulfilled,(function(t,e){return e.payload})),Object(u.a)(r,s.addContact.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(o.a)(t),[n])})),Object(u.a)(r,s.deleteContact.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),b=Object(d.d)("",Object(u.a)({},i.changeFilter,(function(t,e){return e.payload}))),j=Object(d.d)(!1,(c={},Object(u.a)(c,s.fetchContacts.pending,(function(){return!0})),Object(u.a)(c,s.fetchContacts.fulfilled,(function(){return!1})),Object(u.a)(c,s.fetchContacts.rejected,(function(){return!1})),Object(u.a)(c,s.addContact.pending,(function(){return!0})),Object(u.a)(c,s.addContact.fulfilled,(function(){return!1})),Object(u.a)(c,s.addContact.rejected,(function(){return!1})),Object(u.a)(c,s.deleteContact.pending,(function(){return!0})),Object(u.a)(c,s.deleteContact.fulfilled,(function(){return!1})),Object(u.a)(c,s.deleteContact.rejected,(function(){return!1})),c)),p=Object(d.d)(null,(a={},Object(u.a)(a,s.fetchContacts.pending,(function(){return null})),Object(u.a)(a,s.fetchContacts.rejected,(function(t,e){return e.payload})),Object(u.a)(a,s.addContact.pending,(function(){return null})),Object(u.a)(a,s.addContact.rejected,(function(t,e){return e.payload})),Object(u.a)(a,s.deleteContact.pending,(function(){return null})),Object(u.a)(a,s.deleteContact.rejected,(function(t,e){return e.payload})),a));e.a=Object(l.b)({items:f,filter:b,isLoading:j,error:p})},36:function(t,e,n){"use strict";n.r(e),n.d(e,"changeFilter",(function(){return c}));var r=n(5),c=Object(r.b)("contacts/changeFilter")},45:function(t,e,n){"use strict";var r=n(32);n.d(e,"a",(function(){return r.a}))},48:function(t,e,n){t.exports={button:"FormButton_button__2-gNS"}},50:function(t,e,n){t.exports={item:"Loading_item__64Y4B"}},53:function(t,e,n){},75:function(t,e,n){},8:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContacts",(function(){return p})),n.d(e,"addContact",(function(){return O})),n.d(e,"deleteContact",(function(){return h}));var r=n(6),c=n.n(r),a=n(15),u=n(18),o=n.n(u);function i(){return s.apply(this,arguments)}function s(){return(s=Object(a.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/contacts");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/contacts",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.delete("/contacts/".concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var j=n(5),p=Object(j.c)("contacts/fetchContacts",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i();case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),O=Object(j.c)("contacts/addContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,l(e);case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),h=Object(j.c)("contacts/deleteContact",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,f(e);case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}())}},[[103,5,6]]]);
//# sourceMappingURL=main.0438f8a2.chunk.js.map