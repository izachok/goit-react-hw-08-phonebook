(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{104:function(e,t,n){e.exports={list:"ContactList_list__2T7aG"}},105:function(e,t,n){e.exports={message:"ErrorMessage_message__1PSvk"}},106:function(e,t,n){e.exports={fieldInput:"Filter_fieldInput__1at_C"}},108:function(e,t,n){e.exports={item:"Loading_item__64Y4B"}},112:function(e,t,n){},134:function(e,t,n){},22:function(e,t,n){e.exports={form:"RegisterForm_form__cGQtP",label:"RegisterForm_label__3nDE7",fieldInput:"RegisterForm_fieldInput__1bgLQ",validatorError:"RegisterForm_validatorError__273yk"}},260:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"changeFilter",(function(){return F}));var a={};n.r(a),n.d(a,"fetchContacts",(function(){return U})),n.d(a,"addContact",(function(){return B})),n.d(a,"deleteContact",(function(){return D}));var c={};n.r(c),n.d(c,"getContacts",(function(){return fe})),n.d(c,"getFilter",(function(){return pe})),n.d(c,"getFilteredContacts",(function(){return Oe}));n(112);var s=n(26),i=n(7),o=n.n(i),u=n(17),l=n(21),b=n.n(l),d=n(6);b.a.defaults.baseURL="https://connections-api.herokuapp.com";var j,m,f,p=function(e){b.a.defaults.headers.common.Authorization="Bearer ".concat(e)},O=function(){b.a.defaults.headers.common.Authorization=""},h=Object(d.c)("auth/register",function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/users/signup",t);case 3:return n=e.sent,r=n.data,p(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),x=Object(d.c)("auth/login",function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/users/login",t);case 3:return n=e.sent,r=n.data,p(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),v={register:h,logOut:Object(d.c)("auth/logout",Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("/users/logout");case 3:O(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))),logIn:x,checkCurrentUser:Object(d.c)("auth/refresh",function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return p(a),e.prev=5,e.next=8,b.a.get("/users/current");case 8:return c=e.sent,s=c.data,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5);case 15:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},g={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUsername:function(e){return e.auth.user.name}},_=n(2),y=n(11),w=Object(d.d)({name:null,email:null},(j={},Object(_.a)(j,v.register.fulfilled,(function(e,t){var n=t.payload;return{name:n.user.name,email:n.user.email}})),Object(_.a)(j,v.logIn.fulfilled,(function(e,t){var n=t.payload;return{name:n.user.name,email:n.user.email}})),Object(_.a)(j,v.logOut.fulfilled,(function(e,t){t.payload;return{name:null,email:null}})),Object(_.a)(j,v.checkCurrentUser.fulfilled,(function(e,t){var n=t.payload;return{name:n.name,email:n.email}})),j)),C=Object(d.d)(null,(m={},Object(_.a)(m,v.register.fulfilled,(function(e,t){return t.payload.token})),Object(_.a)(m,v.logIn.fulfilled,(function(e,t){return t.payload.token})),Object(_.a)(m,v.logOut.fulfilled,(function(){return null})),m)),N=Object(d.d)(!1,(f={},Object(_.a)(f,v.register.fulfilled,(function(){return!0})),Object(_.a)(f,v.logIn.fulfilled,(function(){return!0})),Object(_.a)(f,v.logOut.fulfilled,(function(){return!1})),Object(_.a)(f,v.checkCurrentUser.fulfilled,(function(){return!0})),f)),k=Object(y.b)({user:w,token:C,isLoggedIn:N}),I=n(16),F=Object(d.b)("contacts/changeFilter");function E(){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/contacts");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/contacts",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("/contacts/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z,S,V,U=Object(d.c)("contacts/fetchContacts",function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,E();case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(d.c)("contacts/addContact",function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,P(t);case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),D=Object(d.c)("contacts/deleteContact",function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,R(t);case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),W=Object(d.d)([],(z={},Object(_.a)(z,U.fulfilled,(function(e,t){return t.payload})),Object(_.a)(z,B.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(I.a)(e),[n])})),Object(_.a)(z,D.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),z)),G=Object(d.d)("",Object(_.a)({},F,(function(e,t){return t.payload}))),H=Object(d.d)(!1,(S={},Object(_.a)(S,U.pending,(function(){return!0})),Object(_.a)(S,U.fulfilled,(function(){return!1})),Object(_.a)(S,U.rejected,(function(){return!1})),Object(_.a)(S,B.pending,(function(){return!0})),Object(_.a)(S,B.fulfilled,(function(){return!1})),Object(_.a)(S,B.rejected,(function(){return!1})),Object(_.a)(S,D.pending,(function(){return!0})),Object(_.a)(S,D.fulfilled,(function(){return!1})),Object(_.a)(S,D.rejected,(function(){return!1})),S)),J=Object(d.d)(null,(V={},Object(_.a)(V,U.pending,(function(){return null})),Object(_.a)(V,U.rejected,(function(e,t){return t.payload})),Object(_.a)(V,B.pending,(function(){return null})),Object(_.a)(V,B.rejected,(function(e,t){return t.payload})),Object(_.a)(V,D.pending,(function(){return null})),Object(_.a)(V,D.rejected,(function(e,t){return t.payload})),V)),M=Object(y.b)({items:W,filter:G,isLoading:H,error:J}),T=n(96),Z={key:"auth",storage:n.n(T).a,whitelist:["token"]},Q=Object(d.a)({reducer:{auth:Object(s.g)(Z,k),contacts:M},middleware:function(e){return e({serializableCheck:{ignoredActions:[s.a,s.f,s.b,s.c,s.d,s.e]}})},devTools:!1}),K=Object(s.h)(Q),X=(n(134),n(9)),Y=n(28),$=n(0),ee=n.n($),te=n(1);function ne(){return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(Y.b,{to:"/register",exact:!0,children:"Register"}),Object(te.jsx)(Y.b,{to:"/login",exact:!0,children:"Login"})]})}var re=n(4),ae=n(64),ce=n(111),se=n(98),ie=n.n(se),oe=["type","onClick","disabled","children"];function ue(e){var t=e.type,n=void 0===t?"button":t,r=e.onClick,a=e.disabled,c=void 0!==a&&a,s=e.children,i=Object(ce.a)(e,oe);return Object(te.jsx)("button",Object(ae.a)(Object(ae.a)({type:n,className:ie.a.button,disabled:c,onClick:r},i),{},{children:s}))}function le(){var e=Object(re.c)(g.getUsername),t=Object(re.b)();return Object(te.jsxs)("div",{children:["Hello, ",e,"!",Object(te.jsx)(ue,{type:"button",onClick:function(){return t(v.logOut())},children:"Logout"})]})}function be(){var e=Object(re.c)(g.getIsLoggedIn);return Object(te.jsxs)("header",{children:[Object(te.jsx)("h1",{children:"Phonebook"}),e?Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(le,{}),Object(te.jsx)(Y.b,{to:"/contacts",children:"Contacts"})]}):Object(te.jsx)(ne,{})]})}var de=n(19),je=n(8),me=n(46),fe=function(e){return e.contacts.items},pe=function(e){return e.contacts.filter},Oe=Object(me.a)([pe,fe],(function(e,t){var n=e.toLowerCase();return t.filter((function(e){return e.name.toLowerCase().includes(n)}))})),he=n(31),xe=n.n(he);function ve(){var e=Object(re.c)(c.getContacts),t=Object(re.b)(),n=function(n){var r=n.name,c=n.number;!function(t){return t=t.toLowerCase(),e.filter((function(e){return e.name.toLowerCase().includes(t)})).length>0}(r)?t(a.addContact({name:r,number:c})):alert("".concat(r," is already in contacts"))};return Object(te.jsx)("div",{children:Object(te.jsx)(je.d,{initialValues:{name:"",number:""},validationSchema:de.a({name:de.b().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name can contain only letters, ', - and space. For example: Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan etc.").required(),number:de.b().matches(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/,"Phone number should contain only numbers and it also could contain spaces, dash, parenthesis and startts with +").required()}),onSubmit:function(e,t){var r=t.resetForm;n(e),r()},children:Object(te.jsxs)(je.c,{className:xe.a.form,children:[Object(te.jsxs)("label",{className:xe.a.label,children:["Name:",Object(te.jsx)(je.b,{className:xe.a.fieldInput,name:"name",type:"text"}),Object(te.jsx)(je.a,{name:"name",component:"span",className:xe.a.validatorError})]}),Object(te.jsxs)("label",{className:xe.a.label,children:["Phone number:",Object(te.jsx)(je.b,{className:xe.a.fieldInput,name:"number",type:"tel"}),Object(te.jsx)(je.a,{name:"number",component:"span",className:xe.a.validatorError})]}),Object(te.jsx)(ue,{type:"submit",children:"Add contact"})]})})})}var ge=n(110),_e=n(52),ye=n.n(_e);function we(e){var t=e.contact,n=Object(re.b)();return Object(te.jsxs)("li",{className:ye.a.item,children:[Object(te.jsxs)("div",{children:[Object(te.jsx)("p",{className:ye.a.itemName,children:t.name}),Object(te.jsx)("p",{className:ye.a.itemPhone,children:t.number})]}),Object(te.jsx)(ue,{onClick:function(){return n(a.deleteContact(t.id))},"aria-label":"Delete contact",children:Object(te.jsx)(ge.a,{size:"18"})})]})}var Ce=n(104),Ne=n.n(Ce);function ke(){var e=Object(re.c)(c.getFilteredContacts),t=Object(re.b)();return Object($.useEffect)((function(){return t(a.fetchContacts())}),[t]),Object(te.jsx)("ul",{className:Ne.a.list,children:e.length>0&&e.map((function(e){return Object(te.jsx)(we,{contact:e},e.id)}))})}var Ie=n(105),Fe=n.n(Ie);function Ee(e){var t=e.message;return Object(te.jsx)("div",{className:Fe.a.message,children:t})}var Le=n(106),Pe=n.n(Le);function qe(){var e=Object(re.b)();return Object(te.jsx)("div",{children:Object(te.jsxs)("label",{children:["Find contacts by name:",Object(te.jsx)("input",{type:"text",name:"filter",onChange:function(t){e(r.changeFilter(t.target.value))},className:Pe.a.fieldInput})]})})}var Re=n(107),Ae=n.n(Re),ze=n(108),Se=n.n(ze);function Ve(){return Object(te.jsx)(Ae.a,{className:Se.a.item,type:"Audio",color:"#52ab98",height:50,width:50})}function Ue(){var e=Object(re.c)((function(e){return e.error})),t=Object(re.c)((function(e){return e.isLoading}));return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ve,{}),Object(te.jsx)("h2",{children:"Contacts"}),Object(te.jsx)(qe,{}),Object(te.jsx)(ke,{}),e&&Object(te.jsx)(Ee,{message:e}),t&&Object(te.jsx)(Ve,{})]})}function Be(){return Object(te.jsx)("div",{children:"Home page"})}var De=n(32),We=n.n(De);function Ge(){var e=Object(re.b)();return Object(te.jsx)("div",{children:Object(te.jsx)(je.d,{initialValues:{email:"",password:""},validationSchema:de.a({email:de.b().email("Invalid email").required("Required"),password:de.b().min(7,"Password should be at least 7 symbols").max(15,"Password should be maximum 15 symbols").required("Required")}),onSubmit:function(t,n){var r=n.resetForm;e(v.logIn(t)),r()},children:Object(te.jsxs)(je.c,{className:We.a.form,children:[Object(te.jsxs)("label",{className:We.a.label,children:["Email:",Object(te.jsx)(je.b,{className:We.a.fieldInput,name:"email",type:"email"}),Object(te.jsx)(je.a,{name:"email",component:"span",className:We.a.validatorError})]}),Object(te.jsxs)("label",{className:We.a.label,children:["Password:",Object(te.jsx)(je.b,{className:We.a.fieldInput,name:"password",type:"password"}),Object(te.jsx)(je.a,{name:"password",component:"span",className:We.a.validatorError})]}),Object(te.jsx)(ue,{type:"submit",children:"Login"})]})})})}function He(){return Object(te.jsx)(te.Fragment,{children:Object(te.jsx)(Ge,{})})}var Je=n(22),Me=n.n(Je);function Te(){var e=Object(re.b)();return Object(te.jsx)("div",{children:Object(te.jsx)(je.d,{initialValues:{name:"",email:"",password:""},validationSchema:de.a({name:de.b().required("Required"),email:de.b().email("Invalid email").required("Required"),password:de.b().min(7,"Password should be at least 7 symbols").max(15,"Password should be maximum 15 symbols").required("Required")}),onSubmit:function(t,n){var r=n.resetForm;e(v.register(t)),r()},children:Object(te.jsxs)(je.c,{className:Me.a.form,children:[Object(te.jsxs)("label",{className:Me.a.label,children:["Name:",Object(te.jsx)(je.b,{className:Me.a.fieldInput,name:"name",type:"text"}),Object(te.jsx)(je.a,{name:"name",component:"span",className:Me.a.validatorError})]}),Object(te.jsxs)("label",{className:Me.a.label,children:["Email:",Object(te.jsx)(je.b,{className:Me.a.fieldInput,name:"email",type:"email"}),Object(te.jsx)(je.a,{name:"email",component:"span",className:Me.a.validatorError})]}),Object(te.jsxs)("label",{className:Me.a.label,children:["Password:",Object(te.jsx)(je.b,{className:Me.a.fieldInput,name:"password",type:"password"}),Object(te.jsx)(je.a,{name:"password",component:"span",className:Me.a.validatorError})]}),Object(te.jsx)(ue,{type:"submit",children:"Register"})]})})})}function Ze(){return Object(te.jsx)(te.Fragment,{children:Object(te.jsx)(Te,{})})}function Qe(){var e=Object(re.b)();return Object($.useEffect)((function(){e(v.checkCurrentUser())}),[e]),Object(te.jsxs)("div",{className:"App",children:[Object(te.jsx)(be,{}),Object(te.jsxs)(X.c,{children:[Object(te.jsx)(X.a,{path:"/",exact:!0,children:Object(te.jsx)(Be,{})}),Object(te.jsx)(X.a,{path:"/login",children:Object(te.jsx)(He,{})}),Object(te.jsx)(X.a,{path:"/register",children:Object(te.jsx)(Ze,{})}),Object(te.jsx)(X.a,{path:"/contacts",children:Object(te.jsx)(Ue,{})})]})]})}var Ke=n(109),Xe=n(48);n.n(Xe).a.render(Object(te.jsx)(ee.a.StrictMode,{children:Object(te.jsx)(re.a,{store:Q,children:Object(te.jsx)(Ke.a,{loading:null,persistor:K,children:Object(te.jsx)(Y.a,{children:Object(te.jsx)(Qe,{})})})})}),document.getElementById("root"))},31:function(e,t,n){e.exports={form:"ContactForm_form__1fuOn",label:"ContactForm_label__378f8",fieldInput:"ContactForm_fieldInput__3zV51",validatorError:"ContactForm_validatorError__3ngg1"}},32:function(e,t,n){e.exports={form:"LoginForm_form__1tF8D",label:"LoginForm_label__1Vf97",fieldInput:"LoginForm_fieldInput__1EHqT",validatorError:"LoginForm_validatorError__2ea7h"}},52:function(e,t,n){e.exports={item:"ContactItem_item__2KdFa",itemName:"ContactItem_itemName__3yDih",itemPhone:"ContactItem_itemPhone__1zXxG"}},98:function(e,t,n){e.exports={button:"FormButton_button__2-gNS"}}},[[260,1,2]]]);
//# sourceMappingURL=main.17ede769.chunk.js.map